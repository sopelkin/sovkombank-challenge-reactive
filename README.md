# sovkombank-challenge-reactive



Описание задачи:

Преамбула

Имеется система, возвращающая данные по пользователям.

На вход принимает идентификатор пользователя, на выход:

Фамилию;
Имя;
Набор других данных.
Система представлена SOAP веб-сервисом. Адрес SOAP веб-сервиса будет передаваться вашему приложению через переменную окружения ws.endpoint. Описание сервиса приведено в приложенном к задаче файле soapService.wsdl.

Помимо этого есть другая система, работающая по REST API, и позволяющая получить список номеров телефонов пользователя. Причем в таком порядке, что первым в списке идет основной номер телефона, а потом все остальные. Адрес REST сервиса получения номеров телефонов будет передаваться вашему приложению через переменную окружения rs.endpoint. Описание API приведено в файле приложенном к задаче файле open-api.json.





Задача

Необходимо написать и развернуть веб-приложение, которое обращается к этим двум системам, получает данные по пользователю и по его номерам телефонов, агрегирует их и возвращает. Ваше веб-приложение должно иметь REST API с 1 эндпоинтом:

GET /user/{id}
- где {id} это идентификатор пользователя, который используется для поиска в вышеуказанных системах. И возвращать ответ в json формате, содержащем три поля:

{
"code" : 0,
"name" : "Иван Иванов",
"phone" : "+7 (495) 111-11-11"
}
code - это код ответа.

0 - успешно
1 - таймаут системы
2 - ошибка получения данных от системы
Важно!

Следует учитывать, что основные данные пользователя являются критичными и если SOAP веб-сервис долго не отвечает, или отвечает ошибкой, то необходимо вернуть соответствующий код.
При этом, данные о номерах телефонов не являются критичными, и если сервис получения телефонов недоступен, или долго не отвечает, это не должно приводить к возврату ошибки. Просто данные об основном телефоне в ответе не заполняются.
Таймаут к обеим системам следует установить в 5 секунд.



name - это имя пользователя, склеенное по маске "{firstName} {lastName}". От системы имя и фамилия будут приходить в отдельных полях.



phone - основной телефон пользователя. Если система вернет несколько телефонов, нужно взять первый из них. Если не вернет ни одного, либо ответит ошибкой 404, то не заполнять это поле.

Запрос основных данных и данных о номере телефона не зависят друг от друга, поэтому должны выполняться параллельно.

Также необходимо закрыть ваше приложение Basic авторизацией и прописать пользователя с логином testuser и паролем password123